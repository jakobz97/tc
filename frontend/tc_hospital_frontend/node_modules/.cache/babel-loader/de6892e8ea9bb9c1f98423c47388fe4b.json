{"ast":null,"code":"import _objectSpread from\"/Users/Jakob/Desktop/TUM/Semester_01/inno_entre/tech_challenge/tc/frontend/tc_hospital_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/Jakob/Desktop/TUM/Semester_01/inno_entre/tech_challenge/tc/frontend/tc_hospital_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{validateLinksAsync,submitUserAsync}from\"../../../slice/verifySlice\";import{useDispatch,useSelector}from\"react-redux\";import{history}from\"../../../helpers/history\";import'../../../styles/main/general/verify/verify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Verify=function Verify(_ref){var match=_ref.match;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),inviteData=_useState2[0],setInviteData=_useState2[1];var dispatch=useDispatch();/**\n     * @function (00) remove all tokens\n     *           (01) verify the signup link backend side\n     */useEffect(function(){//00\nlocalStorage.removeItem(\"user\");localStorage.removeItem(\"userType\");localStorage.setItem(\"loggedIn\",\"false\");//01\ndispatch(validateLinksAsync(match.params.hash)).then(function(res){setInviteData(function(prevState){return _objectSpread(_objectSpread({},prevState),res.payload.inviteData);});}).catch(function(e){console.log('error',e);});console.log();},[]);/**\n     * @function (01) prevent the default form submit\n     *           (02) dispatch the form result to proceed data in the backend\n     *           (03) redirect user based on type to the appropriate home page\n     */var signup=function signup(e){//01\ne.preventDefault();//02\nvar signupData=_objectSpread(_objectSpread({},{hash:match.params.hash,inviteId:inviteData._id}),Object.fromEntries(new FormData(e.target)));dispatch(submitUserAsync(signupData)).then(function(res){//03\nres.payload.userType==='student'?history.push(\"/student/search/\"):history.push(\"/coder/editor/\");window.location.reload();//todo redirect to the right page\n//todo update user type in auth slice\n}).catch(function(e){console.log('error',e);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"main_wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top_section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"heading_text\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main_verify_section\",children:[/*#__PURE__*/_jsx(\"form\",{className:\"main_sub_large\",onSubmit:signup,children:/*#__PURE__*/_jsxs(\"div\",{className:\"input_wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input_section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input_desc\",id:\"psw_input\",children:\"E-Mail wiederholen\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input_field\",type:\"text\",name:\"email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input_section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input_desc\",id:\"psw_input\",children:\"Passwort vergeben\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input_field\",id:\"psw_input\",type:\"password\",name:\"password\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input_section\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit_btn\",id:\"submit_button\",children:\"Registrieren\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"main_sub_small\",children:inviteData.userType==='student'?\"Student Account\":\"Coder Account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom_section\"})]});};export default Verify;","map":{"version":3,"sources":["/Users/Jakob/Desktop/TUM/Semester_01/inno_entre/tech_challenge/tc/frontend/tc_hospital_frontend/src/components/general/verify/Verify.js"],"names":["React","useState","useEffect","validateLinksAsync","submitUserAsync","useDispatch","useSelector","history","Verify","match","inviteData","setInviteData","dispatch","localStorage","removeItem","setItem","params","hash","then","res","prevState","payload","catch","e","console","log","signup","preventDefault","signupData","inviteId","_id","Object","fromEntries","FormData","target","userType","push","window","location","reload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {validateLinksAsync, submitUserAsync} from \"../../../slice/verifySlice\"\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {history} from \"../../../helpers/history\";\n\nimport '../../../styles/main/general/verify/verify.css'\n\nconst Verify = ({ match }) => {\n\n    const [inviteData, setInviteData] = useState({})\n\n    const dispatch = useDispatch();\n\n    /**\n     * @function (00) remove all tokens\n     *           (01) verify the signup link backend side\n     */\n    useEffect(() => {\n        //00\n        localStorage.removeItem(\"user\");\n        localStorage.removeItem(\"userType\");\n        localStorage.setItem(\"loggedIn\", \"false\");\n\n        //01\n        dispatch(validateLinksAsync(match.params.hash))\n            .then((res) => {\n                setInviteData(prevState => ({...prevState, ...res.payload.inviteData}))\n            })\n            .catch((e) => {\n                console.log('error', e)\n            })\n\n        console.log()\n    }, [])\n\n\n    /**\n     * @function (01) prevent the default form submit\n     *           (02) dispatch the form result to proceed data in the backend\n     *           (03) redirect user based on type to the appropriate home page\n     */\n    const signup = (e) => {\n        //01\n        e.preventDefault();\n        //02\n        let signupData = {...{hash: match.params.hash, inviteId: inviteData._id}, ...Object.fromEntries(new FormData(e.target))}\n        dispatch(submitUserAsync(signupData))\n            .then((res) => {\n                //03\n                res.payload.userType === 'student' ? history.push(\"/student/search/\") : history.push(\"/coder/editor/\")\n                window.location.reload();\n\n                //todo redirect to the right page\n                //todo update user type in auth slice\n            })\n            .catch((e) => {\n                console.log('error', e)\n            })\n\n\n    }\n\n\n    return (\n\n        <div className=\"main_wrapper\">\n            <div className=\"top_section\">\n                <div className=\"heading_text\"></div>\n            </div>\n\n            <div className=\"main_verify_section\">\n                <form className=\"main_sub_large\" onSubmit={signup}>\n                    <div className=\"input_wrapper\">\n                        <div className=\"input_section\">\n                            <div className=\"input_desc\" id=\"psw_input\">E-Mail wiederholen</div>\n                            <input className=\"input_field\" type=\"text\" name=\"email\" required/>\n                        </div>\n                        <div className=\"input_section\">\n                            <div className=\"input_desc\" id=\"psw_input\">Passwort vergeben</div>\n                            <input className=\"input_field\" id=\"psw_input\" type=\"password\" name=\"password\" required/>\n                        </div>\n                        <div className=\"input_section\">\n                            <button type=\"submit\" className=\"submit_btn\" id=\"submit_button\">Registrieren</button>\n                        </div>\n                    </div>\n                </form>\n                <div className=\"main_sub_small\">{inviteData.userType === 'student' ? \"Student Account\" : \"Coder Account\"}</div>\n            </div>\n\n            <div className=\"bottom_section\"></div>\n        </div>\n\n\n    );\n};\n\nexport default Verify;\n"]},"metadata":{},"sourceType":"module"}